<html>
 
<head>
  <meta charset="utf-8">
  <title>ZingGrid: Blank Grid</title>
  <script nonce="undefined" src="https://cdn.zinggrid.com/dev/zinggrid-dev.min.js"></script>
  <style>
    body {
      background: #e6e6e6;
    }
 
    zing-grid[loading] {
      height: 456px;
    }
  </style>
</head>
 
<body>
    <h1> Reporting Dashbaord </h1>
    <br>
    <a href="/api/a/logout"> Logout </a>
 
  <zing-grid caption="Remote JSON" layout="row" layout-controls>
    <zg-data src="https://cse135ravisteven.site/api/data/static"></zg-data>
    
  </zing-grid>
  <div id='myChart'><a class="zc-ref" href="https://www.zingchart.com/">Charts by ZingChart</a></div>
 
  <script>
    // window:load event for Javascript to run after HTML
    // because this Javascript is injected into the document head
    window.addEventListener('load', () => {
      // Javascript code to execute after DOM content
 
    });
  </script>
  <!-- This for the bar chart from Zing Grid -->
  <script src="https://cdn.zingchart.com/zingchart.min.js"></script>
  <script>
     function getLoadTimes() {
        fetch('/api/data/performance/loadtimes')
        .then(response => response.json())
        .then(data => {
            let loadtimes = []
            for( let i = 0; i < data.length; i++){
                loadtimes.push(data[i]['timing_page_load'])
            }
            return loadtimes
        }
        );
      }
    
      let loadtimes = getLoadTimes();
      console.log(loadtimes);


    var myConfig = {
        type: 'bar',
        plotarea: {
            'adjust-layout': true
        },
        'scale-x': {
            label: {
                text: "Load Times",
            },
            labels: [ "user 1 ", "user 1", "user 1", "user 1", "user 1" ]
        },
        series: [
            { values: loadtimes }
        ]
    }

    zingchart.render({
    id: 'myChart',
    data: myConfig,
    height: '100%',
    width: '100%'
    });

  </script>
  <script src="/api/collector"></script>
</body>
 
</html>
