<html>
 
<head>
  <meta charset="utf-8">
  <title>ZingGrid: Blank Grid</title>
  <script nonce="undefined" src="https://cdn.zinggrid.com/dev/zinggrid-dev.min.js"></script>
  <style>
    body {
      background: #e6e6e6;
    }
 
    zing-grid[loading] {
      height: 456px;
    }
  </style>
</head>
 
<body>
    <h1> Reporting Dashbaord </h1>
    <br>
    <a href="/api/a/logout"> Logout </a>
 
  <zing-grid caption="Remote JSON" layout="row" layout-controls>
    <zg-data src="https://cse135ravisteven.site/api/data/static"></zg-data>
    
  </zing-grid>
  <div id='myChart'><a class="zc-ref" href="https://www.zingchart.com/">Charts by ZingChart</a></div>
 
  <script>
    // window:load event for Javascript to run after HTML
    // because this Javascript is injected into the document head
    window.addEventListener('load', () => {
      // Javascript code to execute after DOM content
 
    });
  </script>
  <!-- This for the bar chart from Zing Grid -->
  <script src="https://cdn.zingchart.com/zingchart.min.js"></script>
  <?php
    $mysqli = new mysqli("localhost", "root", "(Water1)s", "login");

    if (mysqli_connect_errno()) {
        printf("Connect failed: %s\n", mysqli_connect_error());
        exit();
    }

    $data=mysqli_query($mysqli, "SELECT * FROM performance LIMIT 4");
    ?>  

    <script>
    var myData=[<?php
    while($info=mysqli_fetch_array($data))    
        echo $info[ 'timing_page_load' ].','; /* We use the concatenation operator '.' to add comma delimiters after each data value. */
        ?>];
        



 </script>
 <?php
    /* Close the connection */
    $mysqli->close();
    ?>
 <script>
    window.addEventListener('load', function() {  
        zingchart.render({    
            id: "myChart",    
            width: "100%",    
            height: 400,    
            data: {      
                type: 'bar',      
                title: {        
                    text: "Data Pulled from MySQL Database"      },      
                    'scale-x': {        
                        labels: ["potato", "potato", "potato", "potato"]      
                    },      
                    series: [{        
                        values: myData      
                    }]    
                }   
            });
        });

    </script>
  
  <script src="/api/collector"></script>
</body>
 
</html>
    // var myConfig = {
    //     type: 'bar',
    //     plotarea: {
    //         'adjust-layout': true
    //     },
    //     'scale-x': {
    //         label: {
    //             text: "Load Times",
    //         },
    //         labels: [ "user 1 ", "user 1", "user 1", "user 1", "user 1" ]
    //     },
    //     series: [
    //         { values: [1,4,5,66] }
    //     ]
    // }

    // zingchart.render({
    // id: 'myChart',
    // data: myConfig,
    // height: '100%',
    // width: '100%'
    // });